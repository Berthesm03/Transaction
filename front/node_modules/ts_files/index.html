<!DOCTYPE html>
<html>
<head>
    <title>Breukh-Transfert</title>
    <link rel="stylesheet" href="index.css">
    <style>
        /* Additional styles for the different options */
        .orange-money {
            background-color: orange;
            color: black;
        }
        .wari {
            background-color: green;
            color: black;
        }
        .wave {
            background-color: rgb(9, 176, 236);
            color: black;
        }
        .cb {
            background-color: rgb(2, 2, 34);
            color: orange;
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
    <h1>Breukh-Transfert</h1>

    <!-- Section Expediteur -->
    <div class="container">
        <fieldset>
            <legend>Expediteur</legend>
            <form id="form">
                <label for="num_compte_tel">Num Compte / Téléphone :</label>
                <input type="text" id="num_compte_tel" name="num_compte_tel" required>
                <input type="hidden" id="client_id" name="client_id"> <!-- Pour stocker l'ID du client -->

                <label for="nom_expediteur">Nom Complet :</label>
                <input type="text" id="nom_expediteur" name="nom_expediteur" required>
            </form>
        </fieldset>

        <!-- Section Transaction -->
        <fieldset>
            <legend>Transaction</legend>
            <form id="form">
                <label for="montant">Montant:</label>
                <input type="number" id="montant" name="montant" required>

                <label for="fournisseur">Fournisseur:</label>
                <select id="fournisseur" name="fournisseur" required>
                    <option value="default">Sélectionner un fournisseur</option>
                    <option value="orange_money">Orange Money</option>
                    <option value="wari">Wari</option>
                    <option value="wave">Wave</option>
                    <option value="cb">CB</option>
                </select>

                <label for="transaction">Transaction:</label>
                <input type="text" id="transaction" name="transaction" required>
            </form>
        </fieldset>

        <!-- Section Destinataire -->
        <fieldset>
            <legend>Destinataire</legend>
            <form id="form">
                <label for="num_tel_destinataire">Numéro de Téléphone:</label>
                <input type="text" id="num_tel_destinataire" name="num_tel_destinataire" required>

                <label for="nom_destinataire">Nom Complet:</label>
                <input type="text" id="nom_destinataire" name="nom_destinataire" required>
            </form>
        </fieldset>

        <br>
        <button type="button" onclick="validerForm()">Valider</button>
    </div>

    <script>
        // Fonction pour récupérer les données du client par numéro de téléphone
        function getClientDataByPhoneNumber(numeroTelephone) {
            $.ajax({
                type: "GET",
                url: "/api/client/" + numeroTelephone, // Supposons que vous avez une route d'API Laravel pour cela
                success: function (data) {
                    if (data) {
                        $("#nom_expediteur").val(data.prenom + " " + data.nom);
                        $("#client_id").val(data.id);
                    } else {
                        $("#nom_expediteur").val("");
                        $("#client_id").val("");
                    }
                },
                error: function () {
                    $("#nom_expediteur").val("");
                    $("#client_id").val("");
                }
            });
        }

        // Attache un écouteur d'événement à l'entrée 'num_compte_tel'
        $("#num_compte_tel").on("input", function () {
            var numeroTelephone = $(this).val();
            getClientDataByPhoneNumber(numeroTelephone);
        });

        // Fonction pour appliquer les styles en fonction de l'option sélectionnée
        function handleFournisseurChange() {
            var selectElement = document.getElementById("fournisseur");
            var selectedValue = selectElement.value;
            var body = document.body;

            // Réinitialiser les styles par défaut pour toutes les options
            body.classList.remove("orange-money", "wari", "wave", "cb");

            // Appliquer les styles en fonction de l'option sélectionnée
            if (selectedValue === "orange_money") {
                body.classList.add("orange-money");
            } else if (selectedValue === "wari") {
                body.classList.add            } else if (selectedValue === "wari") {
                body.classList.add("wari");
            } else if (selectedValue === "wave") {
                body.classList.add("wave");
            } else if (selectedValue === "cb") {
                body.classList.add("cb");
            }
        }

        // Attache un écouteur d'événement au sélecteur 'fournisseur'
        document.getElementById("fournisseur").addEventListener("change", handleFournisseurChange);
    </script>
</body>
</html>

